# Redirect all requests to the public/ directory when the webroot is not pointed to public/
# This works on Apache/LiteSpeed
<IfModule mod_rewrite.c>
  RewriteEngine On

  # If the request path already targets a public asset/app folder, don't rewrite
  # Works for root or subfolder deployments (e.g., /public/... or /syntaxtrust/public/...)
  RewriteCond %{REQUEST_URI} !(^|/)public/
  # Allow direct access to admin panel regardless of subfolder base (e.g., /admin or /site/admin)
  RewriteCond %{REQUEST_URI} !(^|/)admin/

  # If the requested file or directory does not exist in the document root
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d

  # Rewrite everything else to public/
  RewriteRule ^(.*)$ public/$1 [L,QSA]
</IfModule>
